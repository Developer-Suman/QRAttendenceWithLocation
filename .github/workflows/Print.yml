name: SSH to Windows VPS

on:
  push:
    branches: [ main ]
  workflow_dispatch:

jobs:
  deploy:
    runs-on: ubuntu-latest
    
    steps:
    - name: Checkout code
      uses: actions/checkout@v3
  
    
    # Alternative: Using password authentication (less secure)
    - name: Connect using sshpass (password auth)
      if: false  # Set to true to use this method
      run: |
        sudo apt-get update
        sudo apt-get install -y sshpass
        sshpass -p "${{ secrets.SSH_PASSWORD }}" ssh -o StrictHostKeyChecking=no administrator@45.117.153.128 << 'EOF'
          echo "Connected with password"
          powershell -Command "Get-Date"
        EOF
